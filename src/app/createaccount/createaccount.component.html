<form [formGroup]="userForm">
  <label for="">name</label>
  <input type="text" formControlName="name" />
  <div *ngIf="userForm.get('name')?.touched && userForm.get('name')?.invalid">
    <p class="error" *ngIf="userForm.get('name')?.errors?.['required']">name is required</p>
    <p class="error" *ngIf="userForm.get('name')?.errors?.['minlength']">minium 3 charecters</p>
    <p class="error" *ngIf="userForm.get('name')?.errors?.['maxlength']">max 10 charecters</p>

  </div>
  <br />

  <label for="">age</label>
  <input type="text" formControlName="age" />
  <div *ngIf="userForm.get('age')?.touched && userForm.get('age')?.invalid">
    <p class="error" *ngIf="userForm.get('age')?.errors?.['required']">age is required</p>
    <p class="error" *ngIf="userForm.get('age')?.errors?.['min']">minium 18 years</p>
    <p class="error" *ngIf="userForm.get('age')?.errors?.['max']">max 60 years</p>

  </div>
  
  <br />

  <label for="">email</label>
  <input type="text" formControlName="email" />

  <div *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid">
    <p class="error" *ngIf="userForm.get('email')?.errors?.['required']">Email is required</p>
    <p class="error" *ngIf="userForm.get('email')?.errors?.['email']">invalid email format</p>
   

  </div>
  <br />

  <label for="">phone</label>
  <input type="number" formControlName="phone" />

  <div *ngIf="userForm.get('phone')?.touched && userForm.get('phone')?.invalid">
    <p class="error" *ngIf="userForm.get('phone')?.errors?.['required']">phone is required</p>
    <p class="error" *ngIf="userForm.get('phone')?.errors?.['min']">minimum 10 digits</p>
    <p class="error" *ngIf="userForm.get('phone')?.errors?.['max']">maximum 10 digits</p>

  </div>
  <br />

  <div formGroupName="address">
    <label for="">city</label>
    <input type="text" formControlName="city" />


    <div *ngIf="userForm.get('address')?.get('city')?.touched && userForm.get('address')?.get('city')?.invalid">
        <p class="error" *ngIf="userForm.get('address')?.get('city')?.errors?.['required']">city is required</p>
      
    
      </div>
    <br />

    <label for="">pin</label>
    <input type="number" formControlName="pin" />
    <br />
  </div>

  <div>
    <label for="">type</label>

    <label for="">dayscholor</label>
    <input type="radio" name="type" formControlName="type" value="dayscholor" />

    <label for="">residential</label>
    <input
      type="radio"
      name="type"
      formControlName="type"
      value="residential"
    />
    <br />

    <div *ngIf="userForm.get('type')?.value == 'dayscholor'">
      <label for="">busfee</label>
      <input type="number" formControlName="busfee" />
      <br />
    </div>

    <div *ngIf="userForm.get('type')?.value == 'residential'">
      <label for="">hostel fee</label>
      <input type="number" formControlName="hostelfee" />
      <br />
    </div>
  </div>

  <label for="">cards</label>
  <button (click)="add()" class="btn btn-info">add card</button>
  <br><br>

  <div formArrayName="cards">
    <div *ngFor="let card of cardsFormArray.controls; let i=index">
        <div formGroupName="{{i}}">

            <h2>card{{i+1}}</h2>

            <label for="">number</label>
            <input type="number" formControlName="number">

            <div *ngIf="cardsFormArray.controls[i]?.get('number')?.touched && cardsFormArray.controls[i]?.get('number')?.invalid">
                <p class="error" *ngIf="cardsFormArray.controls[i]?.get('number')?.errors?.['required']">number is required</p>

            </div>

            
    
            <br>

            <label for="">expiry</label>
            <input type="month" formControlName="expiry">
            <br>

            <label for="">cvv</label>
            <input type="number" formControlName="cvv">
            <br>

            <button class="btn btn-danger" (click)="delete(i)"> delete</button>
            <hr>

        </div>
    </div>
  </div>

  <button (click)="submit()">submit</button>
</form>
